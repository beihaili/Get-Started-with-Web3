import{c as e,p as t}from"./store-263a9ded.js";const s=e(t((e,t)=>({address:"",connected:!1,progress:{},earnedBadges:{},totalExperience:0,userTitle:"新手探索者",studyStreak:0,lastStudyDate:null,connectWallet:t=>e({address:t,connected:!0}),disconnectWallet:()=>e({address:"",connected:!1}),markLessonComplete:s=>{const{progress:a,totalExperience:r}=t();a[s]||(e({progress:{...a,[s]:!0},totalExperience:r+100}),t().updateStudyStreak(),t().updateUserTitle())},getLessonProgress:e=>{const{progress:s}=t();return s[e]||!1},getModuleProgress:e=>{const{progress:s}=t(),a=e.filter(e=>s[e]).length;return{completed:a,total:e.length,percentage:e.length>0?a/e.length*100:0}},earnBadge:(s,a,r={})=>{const{earnedBadges:n,totalExperience:d}=t();n[s]||e({earnedBadges:{...n,[s]:{moduleId:a,timestamp:Date.now(),...r}},totalExperience:d+200})},hasBadge:e=>{const{earnedBadges:s}=t();return!!s[e]},getBadgeCount:()=>{const{earnedBadges:e}=t();return Object.keys(e).length},addExperience:s=>{const{totalExperience:a}=t();e({totalExperience:a+s}),t().updateUserTitle()},updateUserTitle:()=>{const{totalExperience:s}=t();let a="新手探索者";s>=1e4?a="Web3 大师":s>=5e3?a="Web3 专家":s>=2e3?a="Web3 进阶者":s>=500&&(a="Web3 学徒"),e({userTitle:a})},updateStudyStreak:()=>{const{lastStudyDate:s,studyStreak:a}=t(),r=(new Date).toDateString();if(s!==r){const t=new Date;t.setDate(t.getDate()-1);const n=t.toDateString();e(s===n?{studyStreak:a+1,lastStudyDate:r}:{studyStreak:1,lastStudyDate:r})}},resetUserData:()=>e({progress:{},earnedBadges:{},totalExperience:0,userTitle:"新手探索者",studyStreak:0,lastStudyDate:null})}),{name:"web3-user-store",partialize:e=>({address:e.address,connected:e.connected,progress:e.progress,earnedBadges:e.earnedBadges,totalExperience:e.totalExperience,userTitle:e.userTitle,studyStreak:e.studyStreak,lastStudyDate:e.lastStudyDate})}));export{s as u};
