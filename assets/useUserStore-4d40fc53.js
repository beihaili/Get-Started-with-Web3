import{c as e,p as t}from"./store-c89224d1.js";const a=e(t((e,t)=>({progress:{},earnedBadges:{},totalExperience:0,userTitle:"新手探索者",studyStreak:0,lastStudyDate:null,markLessonComplete:a=>{const{progress:r,totalExperience:s}=t();r[a]||(e({progress:{...r,[a]:!0},totalExperience:s+100}),t().updateStudyStreak(),t().updateUserTitle())},getLessonProgress:e=>{const{progress:a}=t();return a[e]||!1},getModuleProgress:e=>{const{progress:a}=t(),r=e.filter(e=>a[e]).length;return{completed:r,total:e.length,percentage:e.length>0?r/e.length*100:0}},earnBadge:(a,r,s={})=>{const{earnedBadges:n,totalExperience:o}=t();n[a]||e({earnedBadges:{...n,[a]:{moduleId:r,timestamp:Date.now(),...s}},totalExperience:o+200})},hasBadge:e=>{const{earnedBadges:a}=t();return!!a[e]},getBadgeCount:()=>{const{earnedBadges:e}=t();return Object.keys(e).length},addExperience:a=>{const{totalExperience:r}=t();e({totalExperience:r+a}),t().updateUserTitle()},updateUserTitle:()=>{const{totalExperience:a}=t();let r="新手探索者";a>=1e4?r="Web3 大师":a>=5e3?r="Web3 专家":a>=2e3?r="Web3 进阶者":a>=500&&(r="Web3 学徒"),e({userTitle:r})},updateStudyStreak:()=>{const{lastStudyDate:a,studyStreak:r}=t(),s=(new Date).toDateString();if(a!==s){const t=new Date;t.setDate(t.getDate()-1);const n=t.toDateString();e(a===n?{studyStreak:r+1,lastStudyDate:s}:{studyStreak:1,lastStudyDate:s})}}}),{name:"web3-user-store",partialize:e=>({progress:e.progress,earnedBadges:e.earnedBadges,totalExperience:e.totalExperience,userTitle:e.userTitle,studyStreak:e.studyStreak,lastStudyDate:e.lastStudyDate})}));export{a as u};
