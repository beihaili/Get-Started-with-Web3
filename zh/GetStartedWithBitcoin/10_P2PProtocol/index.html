
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <title>ç¬¬10è®²ï¼šP2Pç½‘ç»œåè®® Â· Web3å…¥é—¨æŒ‡å—</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 6.0.3">
        <meta name="author" content="beihaili">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/@honkit/honkit-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/@honkit/honkit-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../styles/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../11_NetworkSecurity/" />
    
    
    <link rel="prev" href="../09_BitcoinCore/" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="è¾“å…¥å¹¶æœç´¢" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    ä»‹ç»
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Web3 å¿«é€Ÿå…¥é—¨</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../Web3QuickStart/01_FirstWeb3Identity/">
            
                <a href="../../Web3QuickStart/01_FirstWeb3Identity/">
            
                    
                    åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ª Web3 èº«ä»½
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../../Web3QuickStart/02_FirstWeb3Transaction/">
            
                <a href="../../Web3QuickStart/02_FirstWeb3Transaction/">
            
                    
                    è¿›è¡Œä½ çš„ç¬¬ä¸€ç¬” Web3 äº¤æ˜“
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../Web3QuickStart/03_FirstWeb3Dapp/">
            
                <a href="../../Web3QuickStart/03_FirstWeb3Dapp/">
            
                    
                    æ„å»ºä½ çš„ç¬¬ä¸€ä¸ª Web3 DApp
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../../Web3QuickStart/04_UsefulWeb3Sites/">
            
                <a href="../../Web3QuickStart/04_UsefulWeb3Sites/">
            
                    
                    æœ‰ç”¨çš„ Web3 ç«™ç‚¹
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../../Web3QuickStart/05_LaunchYourFirstToken/">
            
                <a href="../../Web3QuickStart/05_LaunchYourFirstToken/">
            
                    
                    å‘è¡Œä½ çš„ç¬¬ä¸€ä¸ªä»£å¸
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="../../Web3QuickStart/06_Web3Security/">
            
                <a href="../../Web3QuickStart/06_Web3Security/">
            
                    
                    Web3å®‰å…¨é˜²æŠ¤ä¸é˜²éª—æŒ‡å—
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">æ¯”ç‰¹å¸æŠ€æœ¯å…¥é—¨</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../">
            
                <a href="../">
            
                    
                    ğŸ“‹ æŠ€æœ¯æ¶æ„æ€»è§ˆ
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">ğŸ” ç¬¬ä¸€å±‚ï¼šå¯†ç å­¦åŸºç¡€å±‚</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../01_Cryptography/">
            
                <a href="../01_Cryptography/">
            
                    
                    ç¬¬01è®²ï¼šå¯†ç å­¦åŸºç¡€
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../02_Overview/">
            
                <a href="../02_Overview/">
            
                    
                    ç¬¬02è®²ï¼šæ¯”ç‰¹å¸æ¦‚è¿°
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">ğŸ“Š ç¬¬äºŒå±‚ï¼šæ•°æ®å±‚</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../03_BitcoinTx/">
            
                <a href="../03_BitcoinTx/">
            
                    
                    ç¬¬03è®²ï¼šæ¯”ç‰¹å¸äº¤æ˜“åŸºç¡€
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../04_MultiSig/">
            
                <a href="../04_MultiSig/">
            
                    
                    ç¬¬04è®²ï¼šå¤šé‡ç­¾åäº¤æ˜“
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="../05_SegWit/">
            
                <a href="../05_SegWit/">
            
                    
                    ç¬¬05è®²ï¼šéš”ç¦»è§è¯(SegWit)æŠ€æœ¯
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="../06_Taproot/">
            
                <a href="../06_Taproot/">
            
                    
                    ç¬¬06è®²ï¼šTaprootå‡çº§è¯¦è§£
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="../07_AdvancedTransactions/">
            
                <a href="../07_AdvancedTransactions/">
            
                    
                    ç¬¬07è®²ï¼šé«˜çº§äº¤æ˜“åº”ç”¨
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="../08_DataStructure/">
            
                <a href="../08_DataStructure/">
            
                    
                    ç¬¬08è®²ï¼šåŒºå—é“¾æ•°æ®ç»“æ„
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">ğŸŒ ç¬¬ä¸‰å±‚ï¼šç½‘ç»œå±‚</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../09_BitcoinCore/">
            
                <a href="../09_BitcoinCore/">
            
                    
                    ç¬¬09è®²ï¼šæ¯”ç‰¹å¸æ ¸å¿ƒèŠ‚ç‚¹
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="6.2" data-path="./">
            
                <a href="./">
            
                    
                    ç¬¬10è®²ï¼šP2Pç½‘ç»œåè®®
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="../11_NetworkSecurity/">
            
                <a href="../11_NetworkSecurity/">
            
                    
                    ç¬¬11è®²ï¼šç½‘ç»œå®‰å…¨
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">ğŸ¤ ç¬¬å››å±‚ï¼šå…±è¯†å±‚</li>
        
        
    
        <li class="chapter " data-level="7.1" data-path="../12_ProofOfWork/">
            
                <a href="../12_ProofOfWork/">
            
                    
                    ç¬¬12è®²ï¼šå·¥ä½œé‡è¯æ˜ä¸æŒ–çŸ¿
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="../13_DifficultyAdjustment/">
            
                <a href="../13_DifficultyAdjustment/">
            
                    
                    ç¬¬13è®²ï¼šéš¾åº¦è°ƒæ•´ç®—æ³•
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="../14_ForksBIPs/">
            
                <a href="../14_ForksBIPs/">
            
                    
                    ç¬¬14è®²ï¼šåˆ†å‰æœºåˆ¶ä¸BIPæµç¨‹
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">ğŸ’¼ ç¬¬äº”å±‚ï¼šåº”ç”¨å±‚</li>
        
        
    
        <li class="chapter " data-level="8.1" data-path="../15_BitcoinWallet/">
            
                <a href="../15_BitcoinWallet/">
            
                    
                    ç¬¬15è®²ï¼šæ¯”ç‰¹å¸é’±åŒ…
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="../16_BitcoinRPC/">
            
                <a href="../16_BitcoinRPC/">
            
                    
                    ç¬¬16è®²ï¼šæ¯”ç‰¹å¸RPCåº”ç”¨å¼€å‘
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.3" data-path="../17_BitcoinLowFeeBroadcast/">
            
                <a href="../17_BitcoinLowFeeBroadcast/">
            
                    
                    ç¬¬17è®²ï¼šæ¯”ç‰¹å¸ä½è´¹ç‡å¹¿æ’­å·¥å…·
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.4" data-path="../18_BitcoinScript/">
            
                <a href="../18_BitcoinScript/">
            
                    
                    ç¬¬18è®²ï¼šBitcoin Scriptè„šæœ¬ç³»ç»Ÿ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.5" data-path="../19_BitcoinGovernance/">
            
                <a href="../19_BitcoinGovernance/">
            
                    
                    ç¬¬19è®²ï¼šæ¯”ç‰¹å¸æ‰©å®¹ä¸æ²»ç†
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.6" data-path="../20_Ordinals/">
            
                <a href="../20_Ordinals/">
            
                    
                    ç¬¬20è®²ï¼šOrdinalsä¸ç”Ÿæ€åˆ›æ–°
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="8.7" data-path="../21_DeFiCrossChain/">
            
                <a href="../21_DeFiCrossChain/">
            
                    
                    ç¬¬21è®²ï¼šDeFiè·¨é“¾
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">å…¶å®ƒå­¦ä¹ èµ„æºæ•´ç†</li>
        
        
    
        <li class="chapter " data-level="9.1" data-path="../../å…¶å®ƒå­¦ä¹ èµ„æºæ•´ç†/Etherum/">
            
                <a href="../../å…¶å®ƒå­¦ä¹ èµ„æºæ•´ç†/Etherum/">
            
                    
                    ä»¥å¤ªåŠå­¦ä¹ æŒ‡å—
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="../../å…¶å®ƒå­¦ä¹ èµ„æºæ•´ç†/DeFi/">
            
                <a href="../../å…¶å®ƒå­¦ä¹ èµ„æºæ•´ç†/DeFi/">
            
                    
                    DeFiå­¦ä¹ æŒ‡å—
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Web3 æ€è€ƒ</li>
        
        
    
        <li class="chapter " data-level="10.1" data-path="../../Web3Thoughts/01_Principles/">
            
                <a href="../../Web3Thoughts/01_Principles/">
            
                    
                    Web3 åŸåˆ™
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.2" data-path="../../Web3Thoughts/02_WhyBlockchainIsNecessary/">
            
                <a href="../../Web3Thoughts/02_WhyBlockchainIsNecessary/">
            
                    
                    ä¸ºä»€ä¹ˆåŒºå—é“¾æ˜¯å¿…é¡»çš„ï¼Ÿã€Šä¸»æƒä¸ªäººã€‹è¯»ä¹¦ç¬”è®°
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="10.3" data-path="../../Web3Thoughts/03_TheCoolestTransactionOnBitcoin/">
            
                <a href="../../Web3Thoughts/03_TheCoolestTransactionOnBitcoin/">
            
                    
                    åŒºå—é“¾å½©è›‹è§£è¯»æŒ‡å—ï¼šb10c...eb5d ç©äº†å“ªäº›ã€Œæ¢—ã€ï¼Ÿ
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Web3 å·¥ä½œæœºä¼š</li>
        
        
    
        <li class="chapter " data-level="11.1" data-path="../../Web3WorkOpportunities/">
            
                <a href="../../Web3WorkOpportunities/">
            
                    
                    Web3 å·¥ä½œæœºä¼š
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">æˆ‘ä»¬çš„ç ”ç©¶æŠ¥å‘Š</li>
        
        
    
        <li class="chapter " data-level="12.1" data-path="../../OurResearch/Search01_BscAttack/">
            
                <a href="../../OurResearch/Search01_BscAttack/">
            
                    
                    BSC é“¾ä¸Šçš„æ”»å‡»ï¼šä¸ºä½•å‘ç”ŸåŠå…¶æ½œåœ¨çš„å±å®³
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            æœ¬ä¹¦ä½¿ç”¨ HonKit å‘å¸ƒ
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >ç¬¬10è®²ï¼šP2Pç½‘ç»œåè®®</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="ç¬¬10è®²ï¼šp2pç½‘ç»œåè®®">ç¬¬10è®²ï¼šP2Pç½‘ç»œåè®®</h1>
<p><img src="https://img.shields.io/badge/çŠ¶æ€-å·²å®Œæˆ-success" alt="status"></img>
<img src="https://img.shields.io/badge/ä½œè€…-beihaili-blue" alt="author"></img>
<img src="https://img.shields.io/badge/æ—¥æœŸ-2025--09-orange" alt="date"></img>
<img src="https://img.shields.io/badge/éš¾åº¦-ä¸­çº§-yellow" alt="difficulty"></img></p>
<blockquote>
<p>ğŸ’¡ æ¯”ç‰¹å¸P2Pç½‘ç»œæ˜¯å»ä¸­å¿ƒåŒ–çš„æ ¸å¿ƒï¼Œè®©å…¨ä¸–ç•Œçš„èŠ‚ç‚¹èƒ½å¤Ÿåœ¨æ²¡æœ‰ä¸­å¿ƒæœåŠ¡å™¨çš„æƒ…å†µä¸‹ååŒå·¥ä½œã€‚æœ¬ç« å°†ç”¨æœ€ç›´è§‚çš„æ–¹å¼è§£é‡Šè¿™ä¸ª"æ²¡æœ‰ä¸­å¿ƒçš„ç½‘ç»œ"æ˜¯å¦‚ä½•è¿è¡Œçš„ã€‚</p>
</blockquote>
<h2 id="ç›®å½•">ç›®å½•</h2>
<ul>
<li><a href="#å‰è¨€ä¸ºä»€ä¹ˆæ¯”ç‰¹å¸ä¸èƒ½ç”¨å¾®ä¿¡çš„æ–¹å¼">å‰è¨€ï¼šä¸ºä»€ä¹ˆæ¯”ç‰¹å¸ä¸èƒ½ç”¨å¾®ä¿¡çš„æ–¹å¼ï¼Ÿ</a></li>
<li><a href="#p2pç½‘ç»œåƒæ‘åº„ä¼ è¯æ¸¸æˆ">P2Pç½‘ç»œï¼šåƒæ‘åº„ä¼ è¯æ¸¸æˆ</a></li>
<li><a href="#èŠ‚ç‚¹å‘ç°æ–°äººå¦‚ä½•èå…¥æ‘åº„">èŠ‚ç‚¹å‘ç°ï¼šæ–°äººå¦‚ä½•èå…¥æ‘åº„</a></li>
<li><a href="#è¿æ¥ç®¡ç†ç»´æŒæ‘åº„å’Œè°">è¿æ¥ç®¡ç†ï¼šç»´æŒæ‘åº„å’Œè°</a></li>
<li><a href="#æ¶ˆæ¯ä¼ æ’­æ¶ˆæ¯å¦‚ä½•ä¼ éå…¨æ‘">æ¶ˆæ¯ä¼ æ’­ï¼šæ¶ˆæ¯å¦‚ä½•ä¼ éå…¨æ‘</a></li>
<li><a href="#å®‰å…¨å‡çº§ç»™ä¼ è¯åŠ å¯†">å®‰å…¨å‡çº§ï¼šç»™ä¼ è¯åŠ å¯†</a></li>
<li><a href="#åŠ¨æ‰‹å®è·µè¿æ¥æ¯”ç‰¹å¸ç½‘ç»œ">åŠ¨æ‰‹å®è·µï¼šè¿æ¥æ¯”ç‰¹å¸ç½‘ç»œ</a></li>
<li><a href="#å¸¸è§é—®é¢˜è§£ç­”">å¸¸è§é—®é¢˜è§£ç­”</a></li>
</ul>
<h2 id="å‰è¨€ï¼šä¸ºä»€ä¹ˆæ¯”ç‰¹å¸ä¸èƒ½ç”¨å¾®ä¿¡çš„æ–¹å¼ï¼Ÿ">å‰è¨€ï¼šä¸ºä»€ä¹ˆæ¯”ç‰¹å¸ä¸èƒ½ç”¨å¾®ä¿¡çš„æ–¹å¼ï¼Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœå¾®ä¿¡æ²¡æœ‰è…¾è®¯å…¬å¸çš„æœåŠ¡å™¨ä¼šæ€æ ·ï¼Ÿ</p>
<p><strong>å¾®ä¿¡çš„ç°å®ï¼š</strong></p>
<ul>
<li>ä½ å‘æ¶ˆæ¯ â†’ è…¾è®¯æœåŠ¡å™¨ â†’ æœ‹å‹æ”¶åˆ°æ¶ˆæ¯</li>
<li>å¦‚æœè…¾è®¯æœåŠ¡å™¨å®•æœº â†’ å…¨ä¸–ç•Œå¾®ä¿¡éƒ½ä¸èƒ½ç”¨</li>
<li>å¦‚æœæ”¿åºœå…³é—­è…¾è®¯ â†’ å¾®ä¿¡å½»åº•æ¶ˆå¤±</li>
</ul>
<p><strong>ä½†æ¯”ç‰¹å¸åšåˆ°äº†ä¸å¯èƒ½çš„äº‹æƒ…ï¼š</strong></p>
<ul>
<li>å…¨çƒ13,000ä¸ªèŠ‚ç‚¹ï¼Œæ²¡æœ‰æ€»éƒ¨ï¼Œæ²¡æœ‰CEO</li>
<li>24å°æ—¶ä¸é—´æ–­å¤„ç†äº¤æ˜“ï¼Œä»æœªåœæœº</li>
<li>ä»»ä½•æ”¿åºœéƒ½æ— æ³•å…³é—­æ•´ä¸ªç½‘ç»œ</li>
</ul>
<p>è¿™ä¸ª"ä¸å¯èƒ½"æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿç­”æ¡ˆå°±åœ¨P2Pï¼ˆç‚¹å¯¹ç‚¹ï¼‰ç½‘ç»œåè®®ä¸­ã€‚</p>
<h3 id="ğŸ’¡-æ€è€ƒä¸€ä¸‹">ğŸ’¡ æ€è€ƒä¸€ä¸‹</h3>
<p>åœ¨å­¦ä¹ P2Pç½‘ç»œä¹‹å‰ï¼Œå…ˆæƒ³æƒ³ï¼š</p>
<ul>
<li>å¦‚æœä½ åœ¨ä¸€ä¸ªæ²¡æœ‰æ‘é•¿çš„æ‘åº„ï¼Œå¦‚ä½•è®©å…¨æ‘äººéƒ½çŸ¥é“ä¸€ä»¶äº‹ï¼Ÿ</li>
<li>å¦‚æœæ²¡æœ‰é‚®å±€ï¼Œä½ æ€ä¹ˆç»™è¿œæ–¹çš„æœ‹å‹é€ä¿¡ï¼Ÿ</li>
<li>å¦‚æœæ²¡æœ‰ç”µè¯å…¬å¸ï¼Œå¤§å®¶æ€ä¹ˆä¿æŒè”ç³»ï¼Ÿ</li>
</ul>
<h2 id="p2pç½‘ç»œï¼šåƒæ‘åº„ä¼ è¯æ¸¸æˆ">P2Pç½‘ç»œï¼šåƒæ‘åº„ä¼ è¯æ¸¸æˆ</h2>
<h3 id="ä¸­å¿ƒåŒ–-vs-å»ä¸­å¿ƒåŒ–">ä¸­å¿ƒåŒ– vs å»ä¸­å¿ƒåŒ–</h3>
<p><strong>ä¸­å¿ƒåŒ–ç½‘ç»œï¼ˆå¾®ä¿¡æ¨¡å¼ï¼‰ï¼š</strong></p>
<pre><code>ç”¨æˆ·A â†’ è…¾è®¯æœåŠ¡å™¨ â† ç”¨æˆ·B
         â†‘
    å•ç‚¹æ•…éšœé£é™©
</code></pre><p>å°±åƒä¸€ä¸ªæ‘åº„åªæœ‰æ‘é•¿ä¸€ä¸ªäººè´Ÿè´£ä¼ è¯ï¼Œæ‘é•¿ç”Ÿç—…äº†ï¼Œå…¨æ‘éƒ½æ— æ³•äº¤æµã€‚</p>
<p><strong>P2Pç½‘ç»œï¼ˆæ¯”ç‰¹å¸æ¨¡å¼ï¼‰ï¼š</strong></p>
<pre><code>èŠ‚ç‚¹A â†” èŠ‚ç‚¹B â†” èŠ‚ç‚¹C
 â†•       â†•       â†•  
èŠ‚ç‚¹D â†” èŠ‚ç‚¹E â†” èŠ‚ç‚¹F
   æ²¡æœ‰æ‘é•¿ï¼Œç…§æ ·ä¼ è¯
</code></pre><p>å°±åƒæ‘æ°‘ä¹‹é—´ç›´æ¥äº¤æµï¼Œä»»ä½•å‡ ä¸ªæ‘æ°‘ç¦»å¼€éƒ½ä¸å½±å“å…¶ä»–äººç»§ç»­æ²Ÿé€šã€‚</p>
<h3 id="ç½‘ç»œçš„ç¥å¥‡ç‰¹æ€§">ç½‘ç»œçš„ç¥å¥‡ç‰¹æ€§</h3>
<p><strong>æ¯”ç‰¹å¸P2Pç½‘ç»œå°±åƒä¸€ä¸ªç†æƒ³æ‘åº„ï¼š</strong></p>
<ul>
<li>ğŸ˜ï¸ <strong>å¹³ç­‰æ€§</strong>ï¼šæ¯ä¸ªæ‘æ°‘éƒ½æ˜¯å¹³ç­‰çš„ï¼Œæ²¡æœ‰"æ‘é•¿"</li>
<li>ğŸ”„ <strong>å®¹é”™æ€§</strong>ï¼šä»»ä½•æ‘æ°‘ç¦»å¼€éƒ½ä¸å½±å“æ•´ä¸ªæ‘åº„</li>
<li>ğŸš« <strong>æŠ—å®¡æŸ¥</strong>ï¼šæ²¡æœ‰ä¸­å¿ƒç‚¹å¯ä»¥è¢«å…³é—­</li>
<li>ğŸ¤ <strong>è‡ªç»„ç»‡</strong>ï¼šæ‘æ°‘ä¼šè‡ªåŠ¨ç»´æŠ¤å’Œä¼˜åŒ–å…³ç³»</li>
</ul>
<p><strong>è¿æ¥ç­–ç•¥ï¼ˆæ‘æ°‘çš„ç¤¾äº¤è§„åˆ™ï¼‰ï¼š</strong></p>
<ul>
<li>æ¯ä¸ªæ‘æ°‘ä¸»åŠ¨è”ç³»8ä¸ªæœ‹å‹ï¼ˆå‡ºç«™è¿æ¥ï¼‰</li>
<li>åŒæ—¶æ¥å—æœ€å¤š125ä¸ªæœ‹å‹çš„è”ç³»ï¼ˆå…¥ç«™è¿æ¥ï¼‰  </li>
<li>é»˜è®¤åœ¨8333ç«¯å£"å¼€é—¨è¿å®¢"</li>
</ul>
<h2 id="èŠ‚ç‚¹å‘ç°ï¼šæ–°äººå¦‚ä½•èå…¥æ‘åº„">èŠ‚ç‚¹å‘ç°ï¼šæ–°äººå¦‚ä½•èå…¥æ‘åº„</h2>
<p>æ–°èŠ‚ç‚¹åŠ å…¥ç½‘ç»œé¢ä¸´"é¸¡ç”Ÿè›‹"é—®é¢˜ï¼šéœ€è¦çŸ¥é“å…¶ä»–èŠ‚ç‚¹çš„åœ°å€æ‰èƒ½è¿æ¥ï¼Œä½†å¦‚ä½•è·å¾—ç¬¬ä¸€ä¸ªæœ‹å‹çš„è”ç³»æ–¹å¼ï¼Ÿ</p>
<h3 id="ç¬¬ä¸€æ­¥ï¼šæŸ¥ç”µè¯é»„é¡µï¼ˆdnsç§å­ï¼‰">ç¬¬ä¸€æ­¥ï¼šæŸ¥ç”µè¯é»„é¡µï¼ˆDNSç§å­ï¼‰</h3>
<p>æ¯”ç‰¹å¸å°±åƒç»™æ–°æ‘æ°‘å‡†å¤‡äº†9æœ¬"ç”µè¯é»„é¡µ"ï¼š</p>
<p><strong>ğŸ” DNSç§å­å‘ç°è¿‡ç¨‹ï¼š</strong></p>
<ol>
<li><strong>æŸ¥è¯¢ç”µè¯é»„é¡µ</strong>ï¼šæ–°èŠ‚ç‚¹å‘9ä¸ªDNSæœåŠ¡å™¨è¯·æ±‚æ´»è·ƒèŠ‚ç‚¹åˆ—è¡¨</li>
<li><strong>è·å¾—è”ç³»æ–¹å¼</strong>ï¼šæ¯ä¸ªé»„é¡µè¿”å›5-20ä¸ªå¯é æœ‹å‹çš„IPåœ°å€</li>
<li><strong>å°è¯•è¿æ¥</strong>ï¼šæ–°èŠ‚ç‚¹ä¾æ¬¡è”ç³»è¿™äº›åœ°å€ï¼Œå»ºç«‹ç¬¬ä¸€æ‰¹å‹è°Š</li>
</ol>
<p><strong>ğŸ“ æ¯”ç‰¹å¸çš„9æœ¬"ç”µè¯é»„é¡µ"ï¼š</strong></p>
<ul>
<li><code>seed.bitcoin.sipa.be</code> - Pieterç»´æŠ¤çš„æƒå¨é»„é¡µ</li>
<li><code>dnsseed.bluematt.me</code> - Mattçš„ç¤¾åŒºé»„é¡µ  </li>
<li><code>seed.bitcoinstats.com</code> - ç»Ÿè®¡ç½‘ç«™çš„é»„é¡µ</li>
<li>ï¼ˆè¿˜æœ‰å¦å¤–6ä¸ªåˆ†å¸ƒå…¨çƒçš„å¤‡ç”¨é»„é¡µï¼‰</li>
</ul>
<p><strong>ç”µè¯é»„é¡µçš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>ğŸ¢ <strong>ç‹¬ç«‹ç»´æŠ¤</strong>ï¼š9ä¸ªä¸åŒçš„äººç»´æŠ¤ï¼Œä¸ä¼šåŒæ—¶å¤±æ•ˆ</li>
<li>ğŸ”„ <strong>è‡ªåŠ¨æ›´æ–°</strong>ï¼šåªè¿”å›æœ€è¿‘æ´»è·ƒçš„èŠ‚ç‚¹åœ°å€</li>
<li>ğŸŒ <strong>å…¨çƒåˆ†å¸ƒ</strong>ï¼šåˆ†å¸ƒåœ¨ä¸åŒå›½å®¶ï¼ŒæŠ—å•ç‚¹æ•…éšœ</li>
</ul>
<h3 id="ç¬¬äºŒæ­¥ï¼šæœ‹å‹ä»‹ç»æœ‹å‹ï¼ˆåœ°å€ä¼ æ’­ï¼‰">ç¬¬äºŒæ­¥ï¼šæœ‹å‹ä»‹ç»æœ‹å‹ï¼ˆåœ°å€ä¼ æ’­ï¼‰</h3>
<p>ä¸€æ—¦è¿æ¥åˆ°ç¬¬ä¸€ä¸ªæœ‹å‹ï¼Œå‘ç°æ›´å¤šæœ‹å‹å°±å˜å¾—ç®€å•ï¼š</p>
<pre><code>æ–°æ‘æ°‘ â†’ è¿æ¥æ‘æ°‘A â†’ "å—¨ï¼Œä½ è¿˜è®¤è¯†è°ï¼Ÿ"
æ‘æ°‘A â†’ "æˆ‘è®¤è¯†æ‘æ°‘Bã€Cã€Dï¼Œç»™ä½ ä»–ä»¬çš„è”ç³»æ–¹å¼"
æ–°æ‘æ°‘ â†’ è¿æ¥æ‘æ°‘B â†’ "ä½ è¿˜è®¤è¯†å…¶ä»–äººå—ï¼Ÿ"
æ‘æ°‘B â†’ "æˆ‘è®¤è¯†æ‘æ°‘Eã€Fã€G..."
</code></pre><p>è¿™å°±åƒæ»šé›ªçƒä¸€æ ·ï¼Œæœ‹å‹åœˆè¶Šæ¥è¶Šå¤§ï¼</p>
<h3 id="ç¬¬ä¸‰æ­¥ï¼šå»ºç«‹é€šè®¯å½•ï¼ˆæŒä¹…åŒ–å­˜å‚¨ï¼‰">ç¬¬ä¸‰æ­¥ï¼šå»ºç«‹é€šè®¯å½•ï¼ˆæŒä¹…åŒ–å­˜å‚¨ï¼‰</h3>
<p>èªæ˜çš„æ‘æ°‘ä¼šæŠŠæœ‹å‹çš„è”ç³»æ–¹å¼è®°åœ¨å°æœ¬æœ¬ä¸Šï¼š</p>
<pre><code class="lang-python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BitcoinAddressBook</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-variable language_">self</span>.trusted_friends = []    <span class="hljs-comment"># éªŒè¯è¿‡çš„å¯é æœ‹å‹</span>
        <span class="hljs-variable language_">self</span>.potential_friends = []  <span class="hljs-comment"># å¬è¯´è¿‡ä½†è¿˜æ²¡è”ç³»çš„æœ‹å‹</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">save_friend</span>(<span class="hljs-params">self, friend_address</span>):
        <span class="hljs-string">"""æŠŠæœ‹å‹çš„è”ç³»æ–¹å¼è®°å½•ä¸‹æ¥"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.test_connection(friend_address):
            <span class="hljs-variable language_">self</span>.trusted_friends.append(friend_address)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… <span class="hljs-subst">{friend_address}</span> æ˜¯å¯é çš„æœ‹å‹ï¼Œå·²ä¿å­˜"</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-variable language_">self</span>.potential_friends.append(friend_address)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ“ <span class="hljs-subst">{friend_address}</span> å…ˆè®°ä¸‹æ¥ï¼Œä»¥åå†è”ç³»"</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">load_address_book</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""ä¸‹æ¬¡å¯åŠ¨æ—¶ï¼Œç›´æ¥ä»é€šè®¯å½•æ‰¾æœ‹å‹"""</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“– ç¿»å¼€é€šè®¯å½•ï¼Œå¯»æ‰¾è€æœ‹å‹..."</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.trusted_friends
</code></pre>
<h2 id="è¿æ¥ç®¡ç†ï¼šç»´æŒæ‘åº„å’Œè°">è¿æ¥ç®¡ç†ï¼šç»´æŒæ‘åº„å’Œè°</h2>
<h3 id="äº¤æœ‹å‹çš„æ™ºæ…§">äº¤æœ‹å‹çš„æ™ºæ…§</h3>
<p>æ¯”ç‰¹å¸èŠ‚ç‚¹å°±åƒä¸€ä¸ªå–„äºç¤¾äº¤çš„æ‘æ°‘ï¼Œæœ‰ä¸€å¥—å®Œæ•´çš„"äº¤å‹ç­–ç•¥"ï¼š</p>
<p><strong>ä¸»åŠ¨äº¤å‹ï¼ˆ8ä¸ªå‡ºç«™è¿æ¥ï¼‰ï¼š</strong></p>
<ul>
<li>ä¸»åŠ¨å¯»æ‰¾å¹¶è”ç³»8ä¸ªæœ‹å‹</li>
<li>ä¼˜å…ˆè”ç³»é€šè®¯å½•é‡Œçš„å¯é æœ‹å‹</li>
<li>å¦‚æœè€æœ‹å‹è”ç³»ä¸ä¸Šï¼Œå°±å¯»æ‰¾æ–°æœ‹å‹</li>
</ul>
<p><strong>è¢«åŠ¨äº¤å‹ï¼ˆ125ä¸ªå…¥ç«™è¿æ¥ï¼‰ï¼š</strong></p>
<ul>
<li>æ¥å—å…¶ä»–æ‘æ°‘çš„è”ç³»è¯·æ±‚</li>
<li>ä½†ä¸èƒ½æ¥è€…ä¸æ‹’ï¼Œè¦é˜²æ­¢æ¶æ„éªšæ‰°</li>
<li>ç»´æŒä¸€ä¸ªåˆç†çš„ç¤¾äº¤åœˆå­</li>
</ul>
<h3 id="æœ‹å‹åœˆçš„å¤šæ ·æ€§">æœ‹å‹åœˆçš„å¤šæ ·æ€§</h3>
<p>èªæ˜çš„æ‘æ°‘ä¸ä¼šåªå’Œé‚»å±…åšæœ‹å‹ï¼š</p>
<pre><code class="lang-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">choose_diverse_friends</span>(<span class="hljs-params">potential_friends</span>):
    <span class="hljs-string">"""é€‰æ‹©å¤šæ ·åŒ–çš„æœ‹å‹åœˆ"""</span>
    selected_friends = []

    <span class="hljs-comment"># åœ°ç†å¤šæ ·æ€§ï¼šä¸è¦éƒ½æ˜¯åŒä¸€ä¸ªå°åŒºçš„</span>
    regions = {}
    <span class="hljs-keyword">for</span> friend <span class="hljs-keyword">in</span> potential_friends:
        region = get_network_region(friend)
        <span class="hljs-keyword">if</span> region <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> regions:
            regions[region] = []
        regions[region].append(friend)

    <span class="hljs-comment"># æ¯ä¸ªåœ°åŒºæœ€å¤šé€‰2ä¸ªæœ‹å‹</span>
    <span class="hljs-keyword">for</span> region, friends <span class="hljs-keyword">in</span> regions.items():
        selected_friends.extend(friends[:<span class="hljs-number">2</span>])
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä» <span class="hljs-subst">{region}</span> åœ°åŒºé€‰æ‹©äº† <span class="hljs-subst">{<span class="hljs-built_in">min</span>(<span class="hljs-number">2</span>, <span class="hljs-built_in">len</span>(friends))}</span> ä¸ªæœ‹å‹"</span>)

    <span class="hljs-keyword">return</span> selected_friends[:<span class="hljs-number">8</span>]  <span class="hljs-comment"># æ€»å…±8ä¸ªæœ‹å‹</span>
</code></pre>
<p><strong>å¤šæ ·æ€§çš„å¥½å¤„ï¼š</strong></p>
<ul>
<li>ğŸŒ <strong>åœ°ç†åˆ†å¸ƒ</strong>ï¼šé¿å…éƒ½æ˜¯åŒä¸€åœ°åŒºçš„æœ‹å‹</li>
<li>ğŸ”„ <strong>ç‰ˆæœ¬å…¼å®¹</strong>ï¼šæ–°è€ç‰ˆæœ¬çš„æœ‹å‹éƒ½è¦æœ‰</li>
<li>â° <strong>æ—¶é—´åˆ†æ•£</strong>ï¼šä¸åŒæ—¶é—´ä¸Šçº¿çš„æœ‹å‹</li>
</ul>
<h3 id="å¥åº·æ£€æŸ¥ï¼šä¿æŒå‹è°Šæ–°é²œ">å¥åº·æ£€æŸ¥ï¼šä¿æŒå‹è°Šæ–°é²œ</h3>
<p>æ‘æ°‘ä¹‹é—´å®šæœŸé—®å€™ï¼Œç¡®ä¿å‹è°Šé•¿å­˜ï¼š</p>
<pre><code class="lang-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">keep_friendship_alive</span>():
    <span class="hljs-string">"""å®šæœŸé—®å€™æœ‹å‹ï¼Œä¿æŒè”ç³»"""</span>
    <span class="hljs-keyword">for</span> friend <span class="hljs-keyword">in</span> my_friends:
        <span class="hljs-comment"># æ¯90ç§’å‘ä¸ª"ä½ å¥½"</span>
        send_ping(friend, <span class="hljs-string">"å—¨ï¼Œä½ è¿˜åœ¨å—ï¼Ÿ"</span>)

        <span class="hljs-comment"># ç­‰å¾…å›å¤</span>
        response = wait_for_pong(friend, timeout=<span class="hljs-number">30</span>)

        <span class="hljs-keyword">if</span> response:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… <span class="hljs-subst">{friend}</span> å›å¤äº†ï¼šä¸€åˆ‡éƒ½å¥½ï¼"</span>)
            update_friend_status(friend, <span class="hljs-string">"åœ¨çº¿"</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âŒ <span class="hljs-subst">{friend}</span> æ²¡æœ‰å›å¤ï¼Œå¯èƒ½ç¦»çº¿äº†"</span>)
            find_new_friend_to_replace(friend)
</code></pre>
<h2 id="æ¶ˆæ¯ä¼ æ’­ï¼šæ¶ˆæ¯å¦‚ä½•ä¼ éå…¨æ‘">æ¶ˆæ¯ä¼ æ’­ï¼šæ¶ˆæ¯å¦‚ä½•ä¼ éå…¨æ‘</h2>
<h3 id="æ‘åº„å¹¿æ’­ç³»ç»Ÿ">æ‘åº„å¹¿æ’­ç³»ç»Ÿ</h3>
<p>æ¯”ç‰¹å¸ç½‘ç»œå°±åƒä¸€ä¸ªé«˜æ•ˆçš„æ‘åº„å¹¿æ’­ç³»ç»Ÿï¼Œä½†æ²¡æœ‰å¹¿æ’­ç«™ï¼š</p>
<p><strong>ä¼ ç»Ÿå¹¿æ’­ï¼š</strong></p>
<pre><code>æ‘æ°‘A â†’ å¹¿æ’­ç«™ â†’ å…¨æ‘æ”¶å¬
        â†‘
   å•ç‚¹æ•…éšœé£é™©
</code></pre><p><strong>æ¯”ç‰¹å¸å¼ä¼ æ’­ï¼š</strong></p>
<pre><code>æ‘æ°‘A â†’ å‘Šè¯‰æœ‹å‹ä»¬ â†’ æœ‹å‹ä»¬å†å‘Šè¯‰ä»–ä»¬çš„æœ‹å‹ â†’ æ¶ˆæ¯ä¼ éå…¨æ‘
</code></pre><h3 id="æ™ºèƒ½ä¼ æ’­ç­–ç•¥">æ™ºèƒ½ä¼ æ’­ç­–ç•¥</h3>
<p>ä¸ºäº†é¿å…"ä¼ è¯æ¸¸æˆ"å˜æˆæ··ä¹±ï¼Œæ¯”ç‰¹å¸è®¾è®¡äº†èªæ˜çš„ä¼ æ’­æœºåˆ¶ï¼š</p>
<pre><code class="lang-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">spread_news_efficiently</span>(<span class="hljs-params">news</span>):
    <span class="hljs-string">"""é«˜æ•ˆä¼ æ’­æ¶ˆæ¯çš„æ–¹æ³•"""</span>

    <span class="hljs-comment"># ç¬¬1æ­¥ï¼šåˆ¶ä½œæ¶ˆæ¯æ‘˜è¦</span>
    news_summary = create_summary(news)  <span class="hljs-comment"># "æˆ‘æœ‰ä¸€ä¸ªé‡è¦æ¶ˆæ¯"</span>

    <span class="hljs-comment"># ç¬¬2æ­¥ï¼šå…ˆå‘æ‘˜è¦ç»™æœ‹å‹ä»¬</span>
    <span class="hljs-keyword">for</span> friend <span class="hljs-keyword">in</span> my_friends:
        send_message(friend, {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"æˆ‘æœ‰æ¶ˆæ¯"</span>,
            <span class="hljs-string">"summary"</span>: news_summary,
            <span class="hljs-string">"full_news"</span>: <span class="hljs-literal">None</span>  <span class="hljs-comment"># å…ˆä¸å‘å®Œæ•´æ¶ˆæ¯</span>
        })

    <span class="hljs-comment"># ç¬¬3æ­¥ï¼šæœ‹å‹ä»¬ä¼šé—®"ä»€ä¹ˆæ¶ˆæ¯ï¼Ÿ"</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_friend_request</span>(<span class="hljs-params">friend, request</span>):
        <span class="hljs-keyword">if</span> request.<span class="hljs-built_in">type</span> == <span class="hljs-string">"å‘Šè¯‰æˆ‘è¯¦æƒ…"</span>:
            send_message(friend, {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"å®Œæ•´æ¶ˆæ¯"</span>,
                <span class="hljs-string">"content"</span>: news  <span class="hljs-comment"># ç°åœ¨å‘å®Œæ•´æ¶ˆæ¯</span>
            })

    <span class="hljs-comment"># ç¬¬4æ­¥ï¼šæœ‹å‹æ”¶åˆ°åï¼Œç»§ç»­ä¼ æ’­ç»™ä»–ä»¬çš„æœ‹å‹</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“¢ æ¶ˆæ¯å¼€å§‹åœ¨æ‘åº„é‡Œä¼ æ’­..."</span>)
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</strong></p>
<ul>
<li>ğŸ’¾ <strong>èŠ‚çœå¸¦å®½</strong>ï¼šå…ˆå‘æ‘˜è¦ï¼Œéœ€è¦çš„äººå†è¦è¯¦æƒ…</li>
<li>ğŸš« <strong>é¿å…é‡å¤</strong>ï¼šæ¯ä¸ªäººéƒ½è®°ä½å¬è¿‡çš„æ¶ˆæ¯ï¼Œä¸é‡å¤ä¼ æ’­</li>
<li>âš¡ <strong>å¿«é€Ÿä¼ æ’­</strong>ï¼šå¹³å‡12ç§’å°±èƒ½ä¼ é95%çš„ç½‘ç»œ</li>
</ul>
<h3 id="æ¶ˆæ¯æ ¼å¼ï¼šæ‘åº„çš„æ™®é€šè¯">æ¶ˆæ¯æ ¼å¼ï¼šæ‘åº„çš„"æ™®é€šè¯"</h3>
<p>æ‰€æœ‰æ‘æ°‘éƒ½ä½¿ç”¨ç»Ÿä¸€çš„"æ™®é€šè¯"æ ¼å¼ï¼š</p>
<pre><code class="lang-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_bitcoin_message</span>(<span class="hljs-params">message_type, content</span>):
    <span class="hljs-string">"""åˆ›å»ºæ ‡å‡†çš„æ¯”ç‰¹å¸æ¶ˆæ¯"""</span>
    <span class="hljs-comment"># æ‘åº„çš„"æ–¹è¨€æ ‡è¯†"</span>
    magic_word = <span class="hljs-string">b'\xf9\xbe\xb4\xd9'</span>  <span class="hljs-comment"># ä¸»ç½‘çš„é­”æ³•æ•°å­—</span>

    <span class="hljs-comment"># æ¶ˆæ¯ç±»å‹ï¼ˆæœ€å¤š12ä¸ªå­—ç¬¦ï¼‰</span>
    command = message_type.ljust(<span class="hljs-number">12</span>, <span class="hljs-string">b'\x00'</span>)[:<span class="hljs-number">12</span>]

    <span class="hljs-comment"># æ¶ˆæ¯é•¿åº¦</span>
    length = <span class="hljs-built_in">len</span>(content)

    <span class="hljs-comment"># æ¶ˆæ¯"ç­¾å"ï¼ˆé˜²æ­¢ä¼ è¯å¤±çœŸï¼‰</span>
    signature = hashlib.sha256(hashlib.sha256(content).digest()).digest()[:<span class="hljs-number">4</span>]

    <span class="hljs-comment"># ç»„è£…å®Œæ•´æ¶ˆæ¯</span>
    full_message = magic_word + command + length.to_bytes(<span class="hljs-number">4</span>, <span class="hljs-string">'little'</span>) + signature + content

    <span class="hljs-keyword">return</span> full_message

<span class="hljs-comment"># ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ª"æ‰“æ‹›å‘¼"æ¶ˆæ¯</span>
greeting = create_bitcoin_message(<span class="hljs-string">b'version'</span>, <span class="hljs-string">b'Hello, Bitcoin network!'</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ¶ˆæ¯é•¿åº¦ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(greeting)}</span> å­—èŠ‚"</span>)
</code></pre>
<h2 id="å®‰å…¨å‡çº§ï¼šç»™ä¼ è¯åŠ å¯†">å®‰å…¨å‡çº§ï¼šç»™ä¼ è¯åŠ å¯†</h2>
<h3 id="æ˜æ–‡ä¼ è¯çš„é£é™©">æ˜æ–‡ä¼ è¯çš„é£é™©</h3>
<p>ä»¥å‰æ‘æ°‘ä¹‹é—´ä¼ è¯éƒ½æ˜¯æ˜æ–‡çš„ï¼Œå°±åƒå¤§å£°å–Šè¯ï¼š</p>
<pre><code>æ‘æ°‘A å¤§å£°å–Šï¼š"æˆ‘è¦ç»™æ‘æ°‘Bè½¬è´¦1ä¸ªæ¯”ç‰¹å¸ï¼"
å·å¬è€… çªƒç¬‘ï¼š"å˜¿å˜¿ï¼Œæˆ‘çŸ¥é“äº†Açš„è´¢åŠ¡çŠ¶å†µ..."
</code></pre><p>è¿™æ ·æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>
<ul>
<li>ğŸ•µï¸ <strong>éšç§æ³„éœ²</strong>ï¼šåˆ«äººèƒ½å¬åˆ°ä½ çš„æ‰€æœ‰å¯¹è¯</li>
<li>ğŸ­ <strong>èº«ä»½æš´éœ²</strong>ï¼šå®¹æ˜“è¢«è¿½è¸ªå’Œåˆ†æ</li>
<li>ğŸ” <strong>æµé‡åˆ†æ</strong>ï¼šæ”¿åºœå¯èƒ½ç›‘æ§ç½‘ç»œæµé‡</li>
</ul>
<h3 id="bip-324ï¼šç»™ä¼ è¯åŠ å¯†">BIP 324ï¼šç»™ä¼ è¯åŠ å¯†</h3>
<p>2024å¹´ï¼Œæ¯”ç‰¹å¸ç½‘ç»œå¼€å§‹ä½¿ç”¨"åŠ å¯†ä¼ è¯"ï¼š</p>
<pre><code class="lang-python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SecretTalk</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-variable language_">self</span>.my_secret_key = generate_random_key()  <span class="hljs-comment"># æˆ‘çš„å¯†é’¥</span>
        <span class="hljs-variable language_">self</span>.friend_public_key = <span class="hljs-literal">None</span>               <span class="hljs-comment"># æœ‹å‹çš„å…¬é’¥</span>
        <span class="hljs-variable language_">self</span>.shared_secret = <span class="hljs-literal">None</span>                   <span class="hljs-comment"># å…±åŒç§˜å¯†</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">establish_secret_channel</span>(<span class="hljs-params">self, friend</span>):
        <span class="hljs-string">"""å’Œæœ‹å‹å»ºç«‹åŠ å¯†é€šé“"""</span>

        <span class="hljs-comment"># ç¬¬1æ­¥ï¼šäº¤æ¢å…¬é’¥ï¼ˆåƒäº¤æ¢æš—å·ï¼‰</span>
        my_public_key = derive_public_key(<span class="hljs-variable language_">self</span>.my_secret_key)
        send_to_friend(friend, my_public_key)
        <span class="hljs-variable language_">self</span>.friend_public_key = receive_from_friend(friend)

        <span class="hljs-comment"># ç¬¬2æ­¥ï¼šç”Ÿæˆå…±åŒç§˜å¯†ï¼ˆæ•°å­¦é­”æ³•ï¼‰</span>
        <span class="hljs-variable language_">self</span>.shared_secret = calculate_shared_secret(
            <span class="hljs-variable language_">self</span>.my_secret_key, 
            <span class="hljs-variable language_">self</span>.friend_public_key
        )

        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… åŠ å¯†é€šé“å·²å»ºç«‹ï¼ç°åœ¨å¯ä»¥æ‚„æ‚„è¯äº†"</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">send_secret_message</span>(<span class="hljs-params">self, friend, message</span>):
        <span class="hljs-string">"""å‘é€åŠ å¯†æ¶ˆæ¯"""</span>
        <span class="hljs-comment"># ç”¨å…±åŒç§˜å¯†åŠ å¯†æ¶ˆæ¯</span>
        encrypted_message = encrypt_with_secret(message, <span class="hljs-variable language_">self</span>.shared_secret)
        send_to_friend(friend, encrypted_message)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ” å·²å‘é€åŠ å¯†æ¶ˆæ¯ç»™ <span class="hljs-subst">{friend}</span>"</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">receive_secret_message</span>(<span class="hljs-params">self, encrypted_message</span>):
        <span class="hljs-string">"""æ¥æ”¶åŠ å¯†æ¶ˆæ¯"""</span>
        <span class="hljs-comment"># ç”¨å…±åŒç§˜å¯†è§£å¯†æ¶ˆæ¯</span>
        original_message = decrypt_with_secret(encrypted_message, <span class="hljs-variable language_">self</span>.shared_secret)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ“¨ æ”¶åˆ°è§£å¯†æ¶ˆæ¯ï¼š<span class="hljs-subst">{original_message}</span>"</span>)
        <span class="hljs-keyword">return</span> original_message
</code></pre>
<p><strong>åŠ å¯†çš„å¥½å¤„ï¼š</strong></p>
<ul>
<li>ğŸ›¡ï¸ <strong>éšç§ä¿æŠ¤</strong>ï¼šå¤–äººæ— æ³•å·å¬å¯¹è¯å†…å®¹</li>
<li>ğŸ”’ <strong>é˜²ç¯¡æ”¹</strong>ï¼šæ¶ˆæ¯è¢«ä¿®æ”¹ä¼šè¢«å‘ç°</li>
<li>ğŸ”‘ <strong>å‰å‘å®‰å…¨</strong>ï¼šå³ä½¿å¯†é’¥æ³„éœ²ï¼Œä¹‹å‰çš„å¯¹è¯ä»ç„¶å®‰å…¨</li>
<li>ğŸ”„ <strong>å‘åå…¼å®¹</strong>ï¼šè¿˜èƒ½å’Œä½¿ç”¨è€æ–¹å¼çš„æœ‹å‹äº¤æµ</li>
</ul>
<h2 id="åŠ¨æ‰‹å®è·µï¼šè¿æ¥æ¯”ç‰¹å¸ç½‘ç»œ">åŠ¨æ‰‹å®è·µï¼šè¿æ¥æ¯”ç‰¹å¸ç½‘ç»œ</h2>
<h3 id="å‡†å¤‡å·¥ä½œï¼šå®‰è£…æ¯”ç‰¹å¸å®¢æˆ·ç«¯">å‡†å¤‡å·¥ä½œï¼šå®‰è£…æ¯”ç‰¹å¸å®¢æˆ·ç«¯</h3>
<pre><code class="lang-bash"><span class="hljs-comment"># ä¸‹è½½å¹¶å®‰è£…Bitcoin Core</span>
<span class="hljs-comment"># è®¿é—® https://bitcoin.org/en/download</span>

<span class="hljs-comment"># æˆ–è€…ä½¿ç”¨åŒ…ç®¡ç†å™¨ï¼ˆMacï¼‰</span>
brew install bitcoin

<span class="hljs-comment"># æˆ–è€…ä½¿ç”¨åŒ…ç®¡ç†å™¨ï¼ˆUbuntuï¼‰</span>
<span class="hljs-built_in">sudo</span> apt-get install bitcoin
</code></pre>
<h3 id="ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨ä½ çš„æ¯”ç‰¹å¸èŠ‚ç‚¹">ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨ä½ çš„æ¯”ç‰¹å¸èŠ‚ç‚¹</h3>
<pre><code class="lang-bash"><span class="hljs-comment"># å¯åŠ¨æ¯”ç‰¹å¸èŠ‚ç‚¹ï¼ˆæµ‹è¯•ç½‘ç»œï¼‰</span>
bitcoind -testnet -daemon

<span class="hljs-comment"># ç­‰å¾…å‡ ç§’é’Ÿï¼Œè®©èŠ‚ç‚¹å¯åŠ¨</span>
<span class="hljs-built_in">sleep</span> 5

<span class="hljs-comment"># æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦æ­£å¸¸è¿è¡Œ</span>
bitcoin-cli -testnet getnetworkinfo
</code></pre>
<h3 id="ç¬¬äºŒæ­¥ï¼šæŸ¥çœ‹ä½ çš„æœ‹å‹åœˆ">ç¬¬äºŒæ­¥ï¼šæŸ¥çœ‹ä½ çš„æœ‹å‹åœˆ</h3>
<pre><code class="lang-bash"><span class="hljs-comment"># æŸ¥çœ‹è¿æ¥äº†å¤šå°‘ä¸ªæœ‹å‹</span>
bitcoin-cli -testnet getconnectioncount

<span class="hljs-comment"># æŸ¥çœ‹æœ‹å‹ä»¬çš„è¯¦ç»†ä¿¡æ¯</span>
bitcoin-cli -testnet getpeerinfo | <span class="hljs-built_in">head</span> -20
</code></pre>
<p>ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š</p>
<pre><code class="lang-json">{
  <span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>,
  <span class="hljs-string">"addr"</span>: <span class="hljs-string">"192.168.1.100:18333"</span>,
  <span class="hljs-string">"version"</span>: <span class="hljs-number">70016</span>,
  <span class="hljs-string">"subver"</span>: <span class="hljs-string">"/Satoshi:25.0.0/"</span>,
  <span class="hljs-string">"inbound"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-string">"bip152_hb_to"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"bip324"</span>: <span class="hljs-literal">true</span>
}
</code></pre>
<h3 id="ç¬¬ä¸‰æ­¥ï¼šè§‚å¯Ÿæ¶ˆæ¯ä¼ æ’­">ç¬¬ä¸‰æ­¥ï¼šè§‚å¯Ÿæ¶ˆæ¯ä¼ æ’­</h3>
<pre><code class="lang-python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-string">"""
ç®€å•çš„æ¯”ç‰¹å¸ç½‘ç»œç›‘å¬å™¨
è§‚å¯ŸP2Pæ¶ˆæ¯çš„ä¼ æ’­
"""</span>

<span class="hljs-keyword">import</span> socket
<span class="hljs-keyword">import</span> struct
<span class="hljs-keyword">import</span> hashlib
<span class="hljs-keyword">import</span> time

<span class="hljs-keyword">class</span> <span class="hljs-title class_">BitcoinNetworkListener</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, host=<span class="hljs-string">'127.0.0.1'</span>, port=<span class="hljs-number">18333</span></span>):
        <span class="hljs-variable language_">self</span>.host = host
        <span class="hljs-variable language_">self</span>.port = port
        <span class="hljs-variable language_">self</span>.socket = <span class="hljs-literal">None</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">connect_to_node</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""è¿æ¥åˆ°æœ¬åœ°æ¯”ç‰¹å¸èŠ‚ç‚¹"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-variable language_">self</span>.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            <span class="hljs-variable language_">self</span>.socket.connect((<span class="hljs-variable language_">self</span>.host, <span class="hljs-variable language_">self</span>.port))
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… æˆåŠŸè¿æ¥åˆ° <span class="hljs-subst">{self.host}</span>:<span class="hljs-subst">{self.port}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âŒ è¿æ¥å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">send_version_message</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""å‘é€ç‰ˆæœ¬æ¶ˆæ¯ï¼Œè¿›è¡Œæ¡æ‰‹"""</span>
        <span class="hljs-comment"># è¿™é‡Œæ˜¯ç®€åŒ–ç‰ˆæœ¬ï¼Œå®é™…å®ç°æ›´å¤æ‚</span>
        version_payload = struct.pack(<span class="hljs-string">'&lt;I'</span>, <span class="hljs-number">70015</span>)  <span class="hljs-comment"># åè®®ç‰ˆæœ¬</span>
        magic = <span class="hljs-string">b'\x0b\x11\x09\x07'</span>  <span class="hljs-comment"># æµ‹è¯•ç½‘é­”æ³•æ•°å­—</span>
        command = <span class="hljs-string">b'version'</span>.ljust(<span class="hljs-number">12</span>, <span class="hljs-string">b'\x00'</span>)
        length = <span class="hljs-built_in">len</span>(version_payload)
        checksum = hashlib.sha256(hashlib.sha256(version_payload).digest()).digest()[:<span class="hljs-number">4</span>]

        message = magic + command + struct.pack(<span class="hljs-string">'&lt;I'</span>, length) + checksum + version_payload
        <span class="hljs-variable language_">self</span>.socket.send(message)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“¤ å·²å‘é€ç‰ˆæœ¬æ¶ˆæ¯"</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">listen_for_messages</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""ç›‘å¬ç½‘ç»œæ¶ˆæ¯"""</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ‘‚ å¼€å§‹ç›‘å¬P2Pæ¶ˆæ¯..."</span>)

        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            <span class="hljs-keyword">try</span>:
                data = <span class="hljs-variable language_">self</span>.socket.recv(<span class="hljs-number">1024</span>)
                <span class="hljs-keyword">if</span> data:
                    <span class="hljs-variable language_">self</span>.parse_message(data)
                time.sleep(<span class="hljs-number">1</span>)
            <span class="hljs-keyword">except</span> KeyboardInterrupt:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ›‘ åœæ­¢ç›‘å¬"</span>)
                <span class="hljs-keyword">break</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">parse_message</span>(<span class="hljs-params">self, data</span>):
        <span class="hljs-string">"""è§£ææ”¶åˆ°çš„æ¶ˆæ¯"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(data) &gt;= <span class="hljs-number">24</span>:  <span class="hljs-comment"># æ¶ˆæ¯å¤´æœ€å°‘24å­—èŠ‚</span>
            magic = data[:<span class="hljs-number">4</span>]
            command = data[<span class="hljs-number">4</span>:<span class="hljs-number">16</span>].rstrip(<span class="hljs-string">b'\x00'</span>).decode(<span class="hljs-string">'ascii'</span>, errors=<span class="hljs-string">'ignore'</span>)
            length = struct.unpack(<span class="hljs-string">'&lt;I'</span>, data[<span class="hljs-number">16</span>:<span class="hljs-number">20</span>])[<span class="hljs-number">0</span>]

            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ“¨ æ”¶åˆ°æ¶ˆæ¯: <span class="hljs-subst">{command}</span>, é•¿åº¦: <span class="hljs-subst">{length}</span> å­—èŠ‚"</span>)

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    listener = BitcoinNetworkListener()
    <span class="hljs-keyword">if</span> listener.connect_to_node():
        listener.send_version_message()
        listener.listen_for_messages()
</code></pre>
<h3 id="ç¬¬å››æ­¥ï¼šæµ‹è¯•ç½‘ç»œè¿æ¥">ç¬¬å››æ­¥ï¼šæµ‹è¯•ç½‘ç»œè¿æ¥</h3>
<pre><code class="lang-bash"><span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªç®€å•çš„æµ‹è¯•è„šæœ¬</span>
<span class="hljs-built_in">cat</span> &gt; test_p2p.py &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment">#!/usr/bin/env python3</span>
import subprocess
import json

def test_bitcoin_network():
    <span class="hljs-string">""</span><span class="hljs-string">"æµ‹è¯•æ¯”ç‰¹å¸ç½‘ç»œè¿æ¥"</span><span class="hljs-string">""</span>

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ” æµ‹è¯•æ¯”ç‰¹å¸P2Pç½‘ç»œè¿æ¥...\n"</span>)

    <span class="hljs-comment"># æµ‹è¯•1ï¼šæ£€æŸ¥ç½‘ç»œçŠ¶æ€</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“Š ç½‘ç»œçŠ¶æ€:"</span>)
    result = subprocess.run([<span class="hljs-string">'bitcoin-cli'</span>, <span class="hljs-string">'-testnet'</span>, <span class="hljs-string">'getnetworkinfo'</span>], 
                          capture_output=True, text=True)
    <span class="hljs-keyword">if</span> result.returncode == 0:
        info = json.loads(result.stdout)
        <span class="hljs-built_in">print</span>(f<span class="hljs-string">"  ç‰ˆæœ¬: {info['version']}"</span>)
        <span class="hljs-built_in">print</span>(f<span class="hljs-string">"  è¿æ¥æ•°: {info['connections']}"</span>)
        <span class="hljs-built_in">print</span>(f<span class="hljs-string">"  ç½‘ç»œ: {info['networkactive']}"</span>)
        <span class="hljs-built_in">print</span>(f<span class="hljs-string">"  åè®®ç‰ˆæœ¬: {info['protocolversion']}"</span>)

    <span class="hljs-comment"># æµ‹è¯•2ï¼šæ£€æŸ¥å¯¹ç­‰èŠ‚ç‚¹</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ‘¥ å¯¹ç­‰èŠ‚ç‚¹ä¿¡æ¯:"</span>)
    result = subprocess.run([<span class="hljs-string">'bitcoin-cli'</span>, <span class="hljs-string">'-testnet'</span>, <span class="hljs-string">'getpeerinfo'</span>], 
                          capture_output=True, text=True)
    <span class="hljs-keyword">if</span> result.returncode == 0:
        peers = json.loads(result.stdout)
        <span class="hljs-keyword">for</span> i, peer <span class="hljs-keyword">in</span> enumerate(peers[:3]):  <span class="hljs-comment"># åªæ˜¾ç¤ºå‰3ä¸ª</span>
            <span class="hljs-built_in">print</span>(f<span class="hljs-string">"  èŠ‚ç‚¹{i+1}: {peer['addr']} (ç‰ˆæœ¬: {peer['version']})"</span>)

    <span class="hljs-comment"># æµ‹è¯•3ï¼šæ£€æŸ¥åŒºå—é“¾åŒæ­¥çŠ¶æ€</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nâ›“ï¸  åŒºå—é“¾åŒæ­¥çŠ¶æ€:"</span>)
    result = subprocess.run([<span class="hljs-string">'bitcoin-cli'</span>, <span class="hljs-string">'-testnet'</span>, <span class="hljs-string">'getblockchaininfo'</span>], 
                          capture_output=True, text=True)
    <span class="hljs-keyword">if</span> result.returncode == 0:
        info = json.loads(result.stdout)
        <span class="hljs-built_in">print</span>(f<span class="hljs-string">"  å½“å‰åŒºå—: {info['blocks']}"</span>)
        <span class="hljs-built_in">print</span>(f<span class="hljs-string">"  éªŒè¯è¿›åº¦: {info['verificationprogress']:.2%}"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    test_bitcoin_network()
EOF

<span class="hljs-comment"># è¿è¡Œæµ‹è¯•</span>
python3 test_p2p.py
</code></pre>
<h2 id="å¸¸è§é—®é¢˜è§£ç­”">å¸¸è§é—®é¢˜è§£ç­”</h2>
<h3 id="â“-ä¸ºä»€ä¹ˆæ¯”ç‰¹å¸é€‰æ‹©p2pè€Œä¸æ˜¯æ›´é«˜æ•ˆçš„æ¶æ„ï¼Ÿ">â“ ä¸ºä»€ä¹ˆæ¯”ç‰¹å¸é€‰æ‹©P2Pè€Œä¸æ˜¯æ›´é«˜æ•ˆçš„æ¶æ„ï¼Ÿ</h3>
<p><strong>å›ç­”ï¼š</strong> å°±åƒé—®"ä¸ºä»€ä¹ˆè¦æ°‘ä¸»è€Œä¸è¦ç‹¬è£"ä¸€æ ·ã€‚P2Pè™½ç„¶æ•ˆç‡ä¸æ˜¯æœ€é«˜ï¼Œä½†å®ƒæä¾›äº†æ— ä»·çš„ç‰¹æ€§ï¼š</p>
<ul>
<li>ğŸ›ï¸ <strong>å»ä¸­å¿ƒåŒ–</strong>ï¼šæ²¡æœ‰å•ç‚¹æ•…éšœï¼Œæ²¡æœ‰äººèƒ½å…³é—­æ•´ä¸ªç½‘ç»œ</li>
<li>ğŸ›¡ï¸ <strong>æŠ—å®¡æŸ¥</strong>ï¼šä»»ä½•æ”¿åºœæˆ–ç»„ç»‡éƒ½æ— æ³•æ§åˆ¶</li>
<li>ğŸŒ <strong>å…¨çƒåŒ–</strong>ï¼šä»»ä½•äººéƒ½å¯ä»¥å‚ä¸ï¼Œæ— éœ€è®¸å¯</li>
<li>ğŸ’ª <strong>å¼ºå¥æ€§</strong>ï¼šå¤§éƒ¨åˆ†èŠ‚ç‚¹ç¦»çº¿ä¹Ÿä¸å½±å“è¿è¡Œ</li>
</ul>
<p>æ•ˆç‡å¯ä»¥é€šè¿‡æŠ€æœ¯ä¼˜åŒ–æå‡ï¼Œä½†å»ä¸­å¿ƒåŒ–ä¸€æ—¦å¤±å»å°±å¾ˆéš¾æ‰¾å›ã€‚</p>
<h3 id="â“-dnsç§å­ä¼šæˆä¸ºå•ç‚¹æ•…éšœå—ï¼Ÿ">â“ DNSç§å­ä¼šæˆä¸ºå•ç‚¹æ•…éšœå—ï¼Ÿ</h3>
<p><strong>å›ç­”ï¼š</strong> ä¸ä¼šï¼DNSç§å­åªæ˜¯"æ–°äººæŒ‡å—"ï¼Œä¸æ˜¯å¿…éœ€å“ï¼š</p>
<p><strong>å¤šé‡ä¿é™©ï¼š</strong></p>
<ul>
<li>9ä¸ªç‹¬ç«‹çš„DNSç§å­æœåŠ¡å™¨ï¼Œåˆ†å¸ƒå…¨çƒ</li>
<li>å³ä½¿8ä¸ªå¤±æ•ˆï¼Œå‰©ä¸‹1ä¸ªå°±å¤Ÿç”¨</li>
<li>è€èŠ‚ç‚¹æœ‰è‡ªå·±çš„"é€šè®¯å½•"ï¼Œä¸ä¾èµ–DNSç§å­</li>
<li>èŠ‚ç‚¹é—´ä¼šäº’ç›¸åˆ†äº«æœ‹å‹çš„è”ç³»æ–¹å¼</li>
</ul>
<p><strong>çœŸå®æƒ…å†µï¼š</strong></p>
<ul>
<li>DNSç§å­åªåœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶ä½¿ç”¨</li>
<li>è¿è¡Œä¸­çš„ç½‘ç»œå®Œå…¨ä¸ä¾èµ–DNSç§å­</li>
<li>å³ä½¿æ‰€æœ‰DNSç§å­éƒ½æ¶ˆå¤±ï¼Œç°æœ‰ç½‘ç»œä»èƒ½æ­£å¸¸è¿è¡Œ</li>
</ul>
<h3 id="â“-ä¸ºä»€ä¹ˆè¦é™åˆ¶è¿æ¥æ•°ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Ÿ">â“ ä¸ºä»€ä¹ˆè¦é™åˆ¶è¿æ¥æ•°ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Ÿ</h3>
<p><strong>å›ç­”ï¼š</strong> å°±åƒæœ‹å‹åœˆä¸€æ ·ï¼Œä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼š</p>
<p><strong>è¿æ¥å¤ªå°‘çš„é—®é¢˜ï¼š</strong></p>
<ul>
<li>å®¹æ˜“è¢«å­¤ç«‹ï¼ˆæ—¥é£Ÿæ”»å‡»ï¼‰</li>
<li>æ¶ˆæ¯ä¼ æ’­é€Ÿåº¦æ…¢</li>
<li>ç½‘ç»œå®¹æ˜“åˆ†è£‚</li>
</ul>
<p><strong>è¿æ¥å¤ªå¤šçš„é—®é¢˜ï¼š</strong></p>
<ul>
<li>æ¶ˆè€—å¤§é‡ç½‘ç»œå¸¦å®½</li>
<li>å¤„ç†æ¶ˆæ¯çš„è®¡ç®—è´Ÿæ‹…é‡</li>
<li>å®¹æ˜“å—åˆ°æ´ªæ°´æ”»å‡»</li>
</ul>
<p><strong>8+125çš„é­”æ³•æ•°å­—ï¼š</strong></p>
<ul>
<li>8ä¸ªå‡ºç«™è¿æ¥ï¼šç¡®ä¿ç½‘ç»œè¿é€šæ€§</li>
<li>125ä¸ªå…¥ç«™è¿æ¥ï¼šä¸ºå…¶ä»–èŠ‚ç‚¹æä¾›æœåŠ¡</li>
<li>ç»è¿‡å¤šå¹´å®è·µéªŒè¯çš„æœ€ä¼˜å¹³è¡¡ç‚¹</li>
</ul>
<h3 id="â“-bip-324åŠ å¯†ä¼šè®©ç½‘ç»œå˜æ…¢å—ï¼Ÿ">â“ BIP 324åŠ å¯†ä¼šè®©ç½‘ç»œå˜æ…¢å—ï¼Ÿ</h3>
<p><strong>å›ç­”ï¼š</strong> å‡ ä¹ä¸ä¼šï¼ç°ä»£åŠ å¯†ç®—æ³•éå¸¸é«˜æ•ˆï¼š</p>
<p><strong>æ€§èƒ½å¯¹æ¯”ï¼š</strong></p>
<pre><code>ChaCha20åŠ å¯†é€Ÿåº¦ï¼š~1GB/sï¼ˆç°ä»£CPUï¼‰
æ¯”ç‰¹å¸ç½‘ç»œå¸¦å®½ï¼š~1MB/sï¼ˆå…¸å‹èŠ‚ç‚¹ï¼‰
åŠ å¯†å¼€é”€ï¼š&lt;1%çš„CPUä½¿ç”¨ç‡
</code></pre><p><strong>å®é™…æ”¶ç›Šï¼š</strong></p>
<ul>
<li>ğŸ” éšç§ä¿æŠ¤ï¼šå¤–äººæ— æ³•ç›‘å¬ä½ çš„äº¤æ˜“</li>
<li>ğŸ›¡ï¸ å®‰å…¨æå‡ï¼šé˜²æ­¢ä¸­é—´äººæ”»å‡»</li>
<li>ğŸ“Š æµé‡æ··æ·†ï¼šéš¾ä»¥è¿›è¡Œæµé‡åˆ†æ</li>
<li>ğŸš€ æœªæ¥æ‰©å±•ï¼šä¸ºæ›´å¤šåŠŸèƒ½æ‰“åŸºç¡€</li>
</ul>
<p>å¾®å°çš„æ€§èƒ½å¼€é”€æ¢æ¥å·¨å¤§çš„å®‰å…¨æå‡ï¼Œç»å¯¹å€¼å¾—ï¼</p>
<h3 id="â“-æ™®é€šç”¨æˆ·éœ€è¦è¿è¡Œå®Œæ•´èŠ‚ç‚¹å—ï¼Ÿ">â“ æ™®é€šç”¨æˆ·éœ€è¦è¿è¡Œå®Œæ•´èŠ‚ç‚¹å—ï¼Ÿ</h3>
<p><strong>å›ç­”ï¼š</strong> ä¸æ˜¯å¿…éœ€çš„ï¼Œä½†å¼ºçƒˆæ¨èæœ‰æ¡ä»¶çš„ç”¨æˆ·è¿è¡Œï¼š</p>
<p><strong>è½»èŠ‚ç‚¹ï¼ˆSPVï¼‰é€‚åˆï¼š</strong></p>
<ul>
<li>æ‰‹æœºé’±åŒ…ç”¨æˆ·</li>
<li>å¶å°”ä½¿ç”¨æ¯”ç‰¹å¸çš„ç”¨æˆ·</li>
<li>ç½‘ç»œæ¡ä»¶å—é™çš„ç”¨æˆ·</li>
</ul>
<p><strong>å®Œæ•´èŠ‚ç‚¹é€‚åˆï¼š</strong></p>
<ul>
<li>ç»å¸¸ä½¿ç”¨æ¯”ç‰¹å¸çš„ç”¨æˆ·</li>
<li>å…³å¿ƒç½‘ç»œå®‰å…¨å’Œå»ä¸­å¿ƒåŒ–çš„ç”¨æˆ·</li>
<li>æœ‰ç¨³å®šç½‘ç»œå’Œå­˜å‚¨ç©ºé—´çš„ç”¨æˆ·</li>
</ul>
<p><strong>è¿è¡Œå®Œæ•´èŠ‚ç‚¹çš„å¥½å¤„ï¼š</strong></p>
<ul>
<li>ğŸ”’ <strong>æœ€é«˜å®‰å…¨æ€§</strong>ï¼šè‡ªå·±éªŒè¯æ‰€æœ‰äº¤æ˜“</li>
<li>ğŸŒ <strong>æ”¯æŒç½‘ç»œ</strong>ï¼šä¸ºå…¶ä»–ç”¨æˆ·æä¾›æœåŠ¡</li>
<li>ğŸ—³ï¸ <strong>å‚ä¸æ²»ç†</strong>ï¼šåœ¨åè®®å‡çº§ä¸­æœ‰å‘è¨€æƒ</li>
<li>ğŸ“Š <strong>å®Œæ•´æ•°æ®</strong>ï¼šå¯ä»¥æŸ¥è¯¢ä»»ä½•å†å²æ•°æ®</li>
</ul>
<h3 id="â“-å¦‚ä½•æ£€æµ‹å’Œé˜²èŒƒç½‘ç»œæ”»å‡»ï¼Ÿ">â“ å¦‚ä½•æ£€æµ‹å’Œé˜²èŒƒç½‘ç»œæ”»å‡»ï¼Ÿ</h3>
<p><strong>å›ç­”ï¼š</strong> æ¯”ç‰¹å¸ç½‘ç»œæœ‰å¤šå±‚é˜²æŠ¤æœºåˆ¶ï¼š</p>
<p><strong>å¸¸è§æ”»å‡»ç±»å‹ï¼š</strong></p>
<ul>
<li>ğŸŒ‘ <strong>æ—¥é£Ÿæ”»å‡»</strong>ï¼šæ¶æ„èŠ‚ç‚¹åŒ…å›´ä½ ï¼Œè®©ä½ çœ‹ä¸åˆ°çœŸå®ç½‘ç»œ</li>
<li>ğŸ‘¥ <strong>å¥³å·«æ”»å‡»</strong>ï¼šæ”»å‡»è€…åˆ›å»ºå¤§é‡è™šå‡èº«ä»½</li>
<li>ğŸŒŠ <strong>æ´ªæ°´æ”»å‡»</strong>ï¼šå‘é€å¤§é‡åƒåœ¾æ¶ˆæ¯å µå¡ç½‘ç»œ</li>
</ul>
<p><strong>é˜²æŠ¤ç­–ç•¥ï¼š</strong></p>
<pre><code class="lang-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">detect_potential_attacks</span>():
    <span class="hljs-string">"""æ£€æµ‹æ½œåœ¨çš„ç½‘ç»œæ”»å‡»"""</span>

    <span class="hljs-comment"># æ£€æµ‹æ—¥é£Ÿæ”»å‡»</span>
    peer_diversity = check_peer_diversity()
    <span class="hljs-keyword">if</span> peer_diversity &lt; <span class="hljs-number">0.5</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âš ï¸  è­¦å‘Šï¼šè¿æ¥ç¼ºä¹å¤šæ ·æ€§ï¼Œå¯èƒ½é­å—æ—¥é£Ÿæ”»å‡»"</span>)

    <span class="hljs-comment"># æ£€æµ‹å¼‚å¸¸æµé‡</span>
    message_rate = get_message_rate()
    <span class="hljs-keyword">if</span> message_rate &gt; NORMAL_THRESHOLD * <span class="hljs-number">10</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âš ï¸  è­¦å‘Šï¼šæ¶ˆæ¯é€Ÿç‡å¼‚å¸¸ï¼Œå¯èƒ½é­å—æ´ªæ°´æ”»å‡»"</span>)

    <span class="hljs-comment"># æ£€æµ‹ç‰ˆæœ¬é›†ä¸­</span>
    version_distribution = get_version_distribution()
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">max</span>(version_distribution.values()) &gt; <span class="hljs-number">0.8</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âš ï¸  è­¦å‘Šï¼šè¿æ¥çš„èŠ‚ç‚¹ç‰ˆæœ¬è¿‡äºé›†ä¸­"</span>)

<span class="hljs-comment"># è‡ªåŠ¨é˜²æŠ¤æªæ–½</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">auto_defense</span>():
    <span class="hljs-string">"""è‡ªåŠ¨é˜²æŠ¤æœºåˆ¶"""</span>

    <span class="hljs-comment"># å¤šæ ·åŒ–è¿æ¥</span>
    ensure_geographic_diversity()
    ensure_version_diversity()

    <span class="hljs-comment"># é™åˆ¶è¿æ¥é€Ÿç‡</span>
    implement_rate_limiting()

    <span class="hljs-comment"># ç›‘æ§å¼‚å¸¸è¡Œä¸º</span>
    monitor_peer_behavior()
</code></pre>
<hr></hr>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>æ¯”ç‰¹å¸P2Pç½‘ç»œæ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå°±åƒä¸€ä¸ªæ²¡æœ‰æ‘é•¿çš„ç†æƒ³æ‘åº„ï¼š</p>
<h3 id="ğŸ›ï¸-è®¾è®¡å“²å­¦">ğŸ›ï¸ è®¾è®¡å“²å­¦</h3>
<ul>
<li><strong>å»ä¸­å¿ƒåŒ–ä¼˜å…ˆ</strong>ï¼šå®å¯ç‰ºç‰²æ•ˆç‡ä¹Ÿè¦ä¿è¯å»ä¸­å¿ƒåŒ–</li>
<li><strong>æ•°å­¦è¯æ˜</strong>ï¼šç”¨å¯†ç å­¦æ›¿ä»£å¯¹æƒå¨çš„ä¿¡ä»»</li>
<li><strong>è‡ªé€‚åº”æ€§</strong>ï¼šç½‘ç»œèƒ½å¤Ÿè‡ªåŠ¨é€‚åº”ç¯å¢ƒå˜åŒ–</li>
</ul>
<h3 id="ğŸ”§-æŠ€æœ¯ç‰¹è‰²">ğŸ”§ æŠ€æœ¯ç‰¹è‰²</h3>
<ul>
<li><strong>å¤šé‡å‘ç°</strong>ï¼šDNSç§å­ + ç¡¬ç¼–ç èŠ‚ç‚¹ + å¯¹ç­‰ä¼ æ’­</li>
<li><strong>æ™ºèƒ½è¿æ¥</strong>ï¼š8å‡ºç«™+125å…¥ç«™çš„å¹³è¡¡ç­–ç•¥</li>
<li><strong>é«˜æ•ˆä¼ æ’­</strong>ï¼šæ´ªæ³›å¼å¹¿æ’­ + å»é‡æœºåˆ¶</li>
<li><strong>éšç§å‡çº§</strong>ï¼šBIP 324æä¾›ç«¯åˆ°ç«¯åŠ å¯†</li>
</ul>
<h3 id="ğŸŒŸ-å®é™…ä»·å€¼">ğŸŒŸ å®é™…ä»·å€¼</h3>
<ul>
<li>ç†è§£åŒºå—é“¾ç½‘ç»œå±‚åŸç†</li>
<li>ä¸ºå…¶ä»–P2Påº”ç”¨æä¾›è®¾è®¡å‚è€ƒ</li>
<li>æŒæ¡åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ ¸å¿ƒæŠ€æœ¯</li>
</ul>
<p>æ¯”ç‰¹å¸P2Pç½‘ç»œè¯æ˜äº†ï¼šæ²¡æœ‰ä¸­å¿ƒåŒ–æƒå¨ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥æ„å»ºå‡ºå®‰å…¨ã€å¯é ã€å…¨çƒåŒ–çš„ç½‘ç»œç³»ç»Ÿã€‚æ¯ä¸€ä¸ªè¿è¡Œæ¯”ç‰¹å¸èŠ‚ç‚¹çš„äººï¼Œéƒ½æ˜¯è¿™ä¸ªå»ä¸­å¿ƒåŒ–é‡‘èç½‘ç»œçš„å®ˆæŠ¤è€…ã€‚</p>
<blockquote>
<p>ğŸ”— <strong>å®Œæ•´ä»£ç å®ç°</strong>ï¼š<a href="p2p_examples.py">p2p_examples.py</a></p>
<p>ğŸ“š <strong>æ·±å…¥å­¦ä¹ </strong>ï¼š<a href="code_examples">å®Œæ•´æŠ€æœ¯æ–‡æ¡£</a></p>
</blockquote>
<hr></hr>
<div align="center">
<a href="https://github.com/beihaili/Get-Started-with-Web3" target="_blank">ğŸ  è¿”å›ä¸»é¡µ</a> | 
<a href="https://twitter.com/bhbtc1337" target="_blank">ğŸ¦ å…³æ³¨ä½œè€…</a> | 
<a href="https://forms.gle/QMBwL6LwZyQew1tX8" target="_blank">ğŸ“ åŠ å…¥äº¤æµç¾¤</a>
</div>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../09_BitcoinCore/" class="navigation navigation-prev " aria-label="Previous page: ç¬¬09è®²ï¼šæ¯”ç‰¹å¸æ ¸å¿ƒèŠ‚ç‚¹">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../11_NetworkSecurity/" class="navigation navigation-next " aria-label="Next page: ç¬¬11è®²ï¼šç½‘ç»œå®‰å…¨">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"ç¬¬10è®²ï¼šP2Pç½‘ç»œåè®®","level":"6.2","depth":1,"next":{"title":"ç¬¬11è®²ï¼šç½‘ç»œå®‰å…¨","level":"6.3","depth":1,"path":"GetStartedWithBitcoin/11_NetworkSecurity/README.MD","ref":"GetStartedWithBitcoin/11_NetworkSecurity/README.MD","articles":[]},"previous":{"title":"ç¬¬09è®²ï¼šæ¯”ç‰¹å¸æ ¸å¿ƒèŠ‚ç‚¹","level":"6.1","depth":1,"path":"GetStartedWithBitcoin/09_BitcoinCore/README.MD","ref":"GetStartedWithBitcoin/09_BitcoinCore/README.MD","articles":[]},"dir":"ltr"},"config":{"plugins":["highlight","fontsettings"],"styles":{"website":"styles/website.css"},"pluginsConfig":{"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"beihaili","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{"version":"å®Œæ•´ç‰ˆ","status":"âœ… 21ä¸ªæŠ€æœ¯ç« èŠ‚å·²å®Œæˆ","chapters":21,"lastUpdate":"2025-09"},"title":"Web3å…¥é—¨æŒ‡å—","language":"zh-hans","gitbook":"*","description":"å…¨é¢çš„Web3ã€åŒºå—é“¾å’ŒåŠ å¯†è´§å¸å­¦ä¹ æŒ‡å—ï¼ŒåŒ…å«21è®²æ¯”ç‰¹å¸æŠ€æœ¯è¯¦è§£"},"file":{"path":"GetStartedWithBitcoin/10_P2PProtocol/README.md","mtime":"2025-09-23T02:19:20.578Z","type":"markdown"},"gitbook":{"version":"6.0.3","time":"2025-09-23T02:25:11.154Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/@honkit/honkit-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/@honkit/honkit-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

